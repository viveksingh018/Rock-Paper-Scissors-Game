<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Rock Paper Scissors Game</title>
    <style>
      /* Basic Page Styling */
      body {
        font-family: Arial, Helvetica, sans-serif;
        text-align: center;
        padding-top: 50px;
        background-color: aquamarine;
      }

      /* Rock, Paper, Scissors Buttons */
      #btn {
        height: 100px;
        width: 100px;
        margin: 10px;
        border: none;
        border-radius: 50%;
        font-size: 50px; /* Emoji size */
        background-color: blueviolet;
        cursor: pointer;
        color: white;
      }

      /* Result Display Box */
      #resultBox {
        margin: 20px;
        font-size: 18px;
        font-weight: bold;
      }

      /* Reset Score Button */
      #resetScore {
        height: 30px;
        width: 120px;
        display: none; /* hidden initially */
        margin: 20px;
        background-color: rgb(120, 62, 185);
        color: white;
        border: none;
        border-radius: 5px;
        font-weight: 500;
        cursor: pointer;
      }
    </style>
  </head>
  <body>
    <h2>Rock Paper Scissors Game</h2>
    <p>(Press a button to play the game)</p>

    <!-- Game Buttons -->
    <button id="btn" onclick="playGame('Rock')">✊</button>
    <button id="btn" onclick="playGame('Paper')">✋</button>
    <button id="btn" onclick="playGame('Scissor')">✌️</button>

    <!-- Result and Score Display -->
    <div id="resultBox"></div>
    <div id="scoreBox"></div>

    <!-- Reset Score Button -->
    <button id="resetScore" onclick="resetScore()">Reset Score</button>

    <script>
      // -----------------------------
      // 1. Initialize Score
      // Load from localStorage if available, otherwise start with 0
      // -----------------------------
      let score = JSON.parse(localStorage.getItem("score")) || {
        wins: 0,
        losses: 0,
        ties: 0
      };

      // -----------------------------
      // 2. Pick a random move for computer
      // -----------------------------
      function pickComputerMove() {
        const random = Math.random();
        if (random <= 1 / 3) return "Rock";
        else if (random <= 2 / 3) return "Paper";
        else return "Scissor";
      }

      // -----------------------------
      // 3. Play Game
      // Takes player's move, generates computer move,
      // decides result, updates display and score
      // -----------------------------
      function playGame(playerMove) {
        const computerMove = pickComputerMove();
        let result = "";

        if (playerMove === computerMove) result = "Draw";
        else if (
          (playerMove === "Rock" && computerMove === "Scissor") ||
          (playerMove === "Paper" && computerMove === "Rock") ||
          (playerMove === "Scissor" && computerMove === "Paper")
        ) {
          result = "You win";
        } else {
          result = "You lose";
        }

        // Show reset button after first game
        document.querySelector("#resetScore").style.display = "inline-block";

        // Update result and score display
        displayResult(playerMove, computerMove, result);
      }

      // -----------------------------
      // 4. Display Result and Update Score
      // -----------------------------
      function displayResult(playerMove, computerMove, result) {
        // Update score based on result
        if (result === "You win") score.wins += 1;
        else if (result === "You lose") score.losses += 1;
        else score.ties += 1;

        // Save updated score to localStorage
        localStorage.setItem("score", JSON.stringify(score));

        // Display moves and result
        document.querySelector("#resultBox").innerHTML = `
          You picked: <strong>${playerMove}</strong> <br>
          Computer picked: <strong>${computerMove}</strong> <br>
          <span style="color: blue">Result: ${result}</span>
        `;

        // Display updated score
        document.querySelector("#scoreBox").innerHTML = `
          <strong>Your Score</strong><br>
          Wins: ${score.wins}<br>
          Losses: ${score.losses}<br>
          Ties: ${score.ties}
        `;
      }

      // -----------------------------
      // 5. Reset Score
      // -----------------------------
      function resetScore() {
        // Reset score object
        score = { wins: 0, losses: 0, ties: 0 };

        // Remove from localStorage
        localStorage.removeItem("score");

        // Update score display
        document.querySelector("#scoreBox").innerHTML = `
          <strong>Your Score</strong><br>
          Wins: ${score.wins}<br>
          Losses: ${score.losses}<br>
          Ties: ${score.ties}
        `;

        // Clear last result
        document.querySelector("#resultBox").innerHTML = "";

        // Hide reset button again
        document.querySelector("#resetScore").style.display = "none";
      }

      // -----------------------------
      // 6. Show saved score when page loads
      // -----------------------------
      document.addEventListener("DOMContentLoaded", () => {
        document.querySelector("#scoreBox").innerHTML = `
          <strong>Your Score</strong><br>
          Wins: ${score.wins}<br>
          Losses: ${score.losses}<br>
          Ties: ${score.ties}
        `;
      });
    </script>
  </body>
</html>
